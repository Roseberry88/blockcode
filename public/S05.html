<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì½”ë”©ìŠ¤íƒ€íŠ¸ - ì½”ë”© ê³¼ì œ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <!-- Blockly ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blockly/9.3.0/blockly_compressed.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blockly/9.3.0/blocks_compressed.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blockly/9.3.0/javascript_compressed.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blockly/9.3.0/python_compressed.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blockly/9.3.0/msg/ko.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        header {
            background: linear-gradient(135deg, #4285f4, #2a5298);
            color: white;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .header-nav {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.3s ease;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .nav-link:hover::before {
            left: 100%;
        }

        .nav-link:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }

        .nav-link.active {
            background: rgba(255,255,255,0.3);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .user-profile:hover {
            background: rgba(255,255,255,0.2);
        }

        .avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .main-container {
            display: flex;
            min-height: calc(100vh - 80px);
        }

        .task-list {
            width: 25%;
            background-color: #f0f0f0;
            padding: 1rem;
            overflow-y: auto;
            border-right: 1px solid #ddd;
        }

        .task-categories {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .category-tab {
            padding: 0.5rem 1rem;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .category-tab:hover {
            background-color: #e3f2fd;
        }

        .category-tab.active {
            background-color: #4285f4;
            color: white;
            border-color: #4285f4;
            transform: translateY(-2px);
        }

        .search-box {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 25px;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .search-box:focus {
            outline: none;
            border-color: #4285f4;
            box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.1);
        }

        .task-item {
            padding: 1rem;
            background-color: white;
            border-radius: 8px;
            margin-bottom: 0.75rem;
            cursor: pointer;
            border: 1px solid #ddd;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .task-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(66, 133, 244, 0.1), transparent);
            transition: left 0.5s;
        }

        .task-item:hover::before {
            left: 100%;
        }

        .task-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .task-item.active {
            border: 2px solid #4285f4;
            background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
        }

        .task-title {
            font-weight: bold;
            margin-bottom: 0.25rem;
            color: #1a73e8;
        }

        .task-meta {
            font-size: 0.8rem;
            color: #666;
        }

        .task-details {
            width: 75%;
            padding: 1rem;
            background-color: white;
            display: flex;
            flex-direction: column;
        }

        .task-header {
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #4285f4;
        }

        .task-description {
            background: linear-gradient(135deg, #f9f9f9, #f0f0f0);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border-left: 4px solid #4285f4;
        }

        .description-title {
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #1a73e8;
        }

        .example-box {
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 0.5rem;
            font-family: 'Consolas', monospace;
            white-space: pre;
            font-size: 0.9rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .editor-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            background-color: #f0f0f0;
            padding: 0.5rem;
            border-radius: 8px 8px 0 0;
        }

        .editor-tab {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .editor-tab:hover {
            background-color: #e3f2fd;
        }

        .editor-tab.active {
            background-color: #4285f4;
            color: white;
            transform: translateY(-2px);
        }

        .code-editor {
            border: 1px solid #ddd;
            min-height: 300px;
            background-color: #f9f9f9;
            margin-bottom: 1rem;
            position: relative;
            border-radius: 8px;
            overflow: hidden;
        }

        .block-code-area {
            display: none;
            flex-direction: column;
            gap: 0.5rem;
            padding: 1rem;
        }

        .code-block {
            padding: 0.75rem;
            border-radius: 8px;
            color: white;
            display: inline-block;
            margin-left: 20px;
            cursor: move;
            transition: all 0.3s ease;
        }

        .code-block:hover {
            transform: scale(1.05);
        }

        .code-block.yellow {
            background: linear-gradient(135deg, #ffc107, #ff8f00);
        }

        .code-block.blue {
            background: linear-gradient(135deg, #4285f4, #1976d2);
        }

        .code-block.red {
            background: linear-gradient(135deg, #f44336, #d32f2f);
        }

        .code-block.green {
            background: linear-gradient(135deg, #4caf50, #388e3c);
        }

        #blocklyDiv {
            height: 100%;
            min-height: 300px;
            width: 100%;
        }

        .code-view {
            display: none;
            height: 300px;
            width: 100%;
            padding: 1rem;
            font-family: 'Consolas', monospace;
            white-space: pre;
            overflow: auto;
            background-color: #2d3748;
            color: #e2e8f0;
            border: 1px solid #ddd;
            font-size: 0.9rem;
        }

        .action-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-top: 1rem;
        }

        .btn {
            padding: 0.75rem 2rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            border: none;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .btn-run {
            background: linear-gradient(135deg, #4caf50, #388e3c);
            color: white;
        }

        .btn-test {
            background: linear-gradient(135deg, #ff9800, #f57400);
            color: white;
        }

        .btn-submit {
            background: linear-gradient(135deg, #4285f4, #1976d2);
            color: white;
        }

        .code-panel {
            margin-top: 1rem;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            background: linear-gradient(135deg, #f0f0f0, #e0e0e0);
            padding: 0.75rem;
            border-radius: 8px 8px 0 0;
        }

        .code-title {
            font-weight: bold;
            color: #1a73e8;
        }

        .language-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .language-button {
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .language-button:hover {
            transform: translateY(-2px);
        }

        .active-language {
            background-color: #4285f4;
            color: white;
        }

        .inactive-language {
            background-color: white;
            border: 1px solid #ddd;
        }

        .code-content {
            height: 200px;
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 1rem;
            overflow-y: auto;
            font-family: 'Consolas', monospace;
            white-space: pre;
            border: 1px solid #ddd;
            font-size: 0.9rem;
        }

        .output-panel {
            margin-top: 1rem;
        }

        .output-header {
            background: linear-gradient(135deg, #f0f0f0, #e0e0e0);
            padding: 0.75rem;
            font-weight: bold;
            border-radius: 8px 8px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #1a73e8;
        }

        .output-content {
            height: 150px;
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 1rem;
            overflow-y: auto;
            font-family: 'Consolas', monospace;
            white-space: pre;
            border: 1px solid #ddd;
            font-size: 0.9rem;
        }

        .test-case-panel {
            display: none;
            margin-top: 1rem;
        }

        .test-case-header {
            background: linear-gradient(135deg, #f0f0f0, #e0e0e0);
            padding: 0.75rem;
            font-weight: bold;
            border-radius: 8px 8px 0 0;
            color: #1a73e8;
        }

        .test-case-content {
            background-color: #f8f9fa;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 0 0 8px 8px;
        }

        .test-case-item {
            margin-bottom: 0.75rem;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            display: flex;
            align-items: center;
            background: white;
            transition: all 0.3s ease;
        }

        .test-case-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .test-case-badge {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 1rem;
        }

        .badge-success {
            background-color: #4caf50;
        }

        .badge-error {
            background-color: #f44336;
        }

        .badge-pending {
            background-color: #9e9e9e;
        }

        .output-badge {
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            color: white;
            transition: all 0.3s ease;
        }

        .output-badge:hover {
            transform: scale(1.1);
        }

        .score-badge {
            background: linear-gradient(135deg, #4285f4, #1976d2);
        }

        .feedback-badge {
            background: linear-gradient(135deg, #ff9800, #f57400);
            cursor: pointer;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 2rem;
            border-radius: 15px;
            width: 70%;
            max-width: 700px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #4285f4;
        }

        .modal-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #1a73e8;
        }

        .modal-close {
            cursor: pointer;
            font-size: 1.5rem;
            color: #666;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background-color: #f44336;
            color: white;
        }

        .modal-body {
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }

        .result-summary {
            margin-top: 1rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, #f5f5f5, #e0e0e0);
            border-radius: 10px;
            text-align: center;
            border-left: 5px solid #4285f4;
        }

        .result-score {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .result-pass {
            color: #4caf50;
        }

        .result-fail {
            color: #f44336;
        }

        /* í†µí•© ë„¤ë¹„ê²Œì´ì…˜ ìŠ¤íƒ€ì¼ */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .loading-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top: 4px solid #fff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .navigation-notification {
            position: fixed;
            top: 100px;
            right: 30px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
            font-family: Arial, sans-serif;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .header-nav {
                display: none;
            }
            
            .main-container {
                flex-direction: column;
            }
            
            .task-list, .task-details {
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <!-- ë¡œë”© ì˜¤ë²„ë ˆì´ -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <header>
        <div class="logo" id="logoTitle">ğŸš€ ì½”ë”©ìŠ¤íƒ€íŠ¸: ì½”ë”© ê³¼ì œ</div>
        
        <div class="header-nav">
            <a href="#" class="nav-link" id="dashboardLink">ëŒ€ì‹œë³´ë“œ</a>
            <a href="#" class="nav-link" id="blockCodingLink">ë¸”ë¡ ì½”ë”©</a>
            <a href="#" class="nav-link" id="algorithmLink">ì•Œê³ ë¦¬ì¦˜</a>
            <a href="#" class="nav-link active" id="assignmentsLink">ê³¼ì œ ê´€ë¦¬</a>
            <a href="#" class="nav-link" id="progressLink">í•™ìŠµ í˜„í™©</a>
        </div>

        <div class="user-profile" id="userProfile">
            <span id="userName">ê¹€ì¤€í˜¸</span>
            <div class="avatar" id="userAvatar">ê¹€</div>
        </div>
    </header>

    <div class="main-container">
        <!-- ì¢Œì¸¡ ê³¼ì œ ëª©ë¡ -->
        <div class="task-list">
            <h3>ê³¼ì œ ëª©ë¡</h3>

            <!-- ê³¼ì œ ì¹´í…Œê³ ë¦¬ íƒ­ -->
            <div class="task-categories">
                <div class="category-tab active" data-category="all">ì „ì²´</div>
                <div class="category-tab" data-category="incomplete">ë¯¸ì™„ë£Œ</div>
            </div>

            <!-- ê³¼ì œ ê²€ìƒ‰ -->
            <input type="text" class="search-box" placeholder="ê³¼ì œ ê²€ìƒ‰..." id="searchBox">

            <!-- ê³¼ì œ ëª©ë¡ í•­ëª©ë“¤ -->
            <div class="task-items" id="taskItems">
                <div class="task-item active" data-task-id="1">
                    <div class="task-title">ë°˜ë³µë¬¸ìœ¼ë¡œ ì‚¬ê°í˜• ê·¸ë¦¬ê¸°</div>
                    <div class="task-meta">ë‚œì´ë„: ì´ˆê¸‰ | ë§ˆê°: 2ì¼ í›„</div>
                </div>

                <div class="task-item" data-task-id="2">
                    <div class="task-title">ì¡°ê±´ë¬¸ìœ¼ë¡œ ì„±ì  ê³„ì‚°í•˜ê¸°</div>
                    <div class="task-meta">ë‚œì´ë„: ì´ˆê¸‰ | ë§ˆê°: 5ì¼ í›„</div>
                </div>

                <div class="task-item" data-task-id="3">
                    <div class="task-title">í•¨ìˆ˜ë¡œ ê³„ì‚°ê¸° ë§Œë“¤ê¸°</div>
                    <div class="task-meta">ë‚œì´ë„: ì¤‘ê¸‰ | ë§ˆê°: 7ì¼ í›„</div>
                </div>

                <div class="task-item" data-task-id="4">
                    <div class="task-title">ë°°ì—´ë¡œ ë°ì´í„° ë¶„ì„í•˜ê¸°</div>
                    <div class="task-meta">ë‚œì´ë„: ì¤‘ê¸‰ | ë§ˆê°: ë¯¸ì •</div>
                </div>
            </div>
        </div>

        <!-- ìš°ì¸¡ ê³¼ì œ ìƒì„¸ íŒ¨ë„ -->
        <div class="task-details" id="taskDetails">
            <!-- ê³¼ì œ ì œëª© ë° ì •ë³´ -->
            <div class="task-header">
                <h2 id="currentTaskTitle">ë°˜ë³µë¬¸ìœ¼ë¡œ ì‚¬ê°í˜• ê·¸ë¦¬ê¸°</h2>
                <div class="task-meta" id="currentTaskMeta">ë‚œì´ë„: ì´ˆê¸‰ | ë°°ì •: ìœ ìŠ¹í›ˆ êµìˆ˜ | ë§ˆê°: 2025-04-10 23:59</div>
            </div>

            <!-- ê³¼ì œ ì„¤ëª… ì˜ì—­ -->
            <div class="task-description">
                <div class="description-title">ë¬¸ì œ ì„¤ëª…</div>
                <p id="taskDescription">ë°˜ë³µë¬¸ì„ ì‚¬ìš©í•˜ì—¬ N x N í¬ê¸°ì˜ ì‚¬ê°í˜•ì„ ê·¸ë¦¬ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ì„¸ìš”.</p>
                <p>ì‚¬ìš©ìë¡œë¶€í„° N ê°’ì„ ì…ë ¥ë°›ì•„ '*' ë¬¸ìë¡œ ì±„ì›Œì§„ ì‚¬ê°í˜•ì„ ì¶œë ¥í•©ë‹ˆë‹¤.</p>
                <p>ì´ì¤‘ ë°˜ë³µë¬¸ì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.</p>

                <div class="description-title" style="margin-top: 1rem;">ì…ì¶œë ¥ ì˜ˆì‹œ</div>
                <div class="example-box" id="taskExample">ì…ë ¥: 4
ì¶œë ¥:
****
****
****
****</div>
            </div>

            <!-- ì½”ë“œ ì—ë””í„° ì˜ì—­ -->
            <div class="editor-tabs">
                <div class="editor-tab active" data-editor="block">ë¸”ë¡</div>
                <div class="editor-tab" data-editor="code">ì½”ë“œ</div>
            </div>

            <div class="code-editor">
                <!-- ë¸”ë¡ ì½”ë“œ ì˜ì—­ -->
                <div id="blocklyDiv"></div>
                <div id="codeView" class="code-view"></div>
            </div>

            <!-- ì½”ë“œ í‘œì‹œ ì˜ì—­ -->
            <div class="code-panel">
                <div class="code-header">
                    <div class="code-title">ì‹¤ì œ ì½”ë“œ</div>
                    <div class="language-buttons">
                        <div class="language-button active-language" id="pythonButton">Python</div>
                        <div class="language-button inactive-language" id="javascriptButton">JavaScript</div>
                    </div>
                </div>
                <div class="code-content" id="codeContent"></div>
            </div>

            <!-- ì¶œë ¥ ì˜ì—­ -->
            <div class="output-panel">
                <div class="output-header">
                    <span>ì‹¤í–‰ ê²°ê³¼</span>
                    <div>
                        <span class="output-badge score-badge" id="scoreDisplay" style="display: none;">ì ìˆ˜: 0/100</span>
                        <span class="output-badge feedback-badge" id="feedbackButton" style="display: none;">í”¼ë“œë°± ë³´ê¸°</span>
                    </div>
                </div>
                <div class="output-content" id="outputContent"></div>
            </div>

            <!-- í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ íŒ¨ë„ -->
            <div class="test-case-panel" id="testCasePanel">
                <div class="test-case-header">í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ê²°ê³¼</div>
                <div class="test-case-content" id="testCaseContent">
                    <!-- ì—¬ê¸°ì— í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>

            <!-- ì‹¤í–‰ ë° ì œì¶œ ë²„íŠ¼ -->
            <div class="action-buttons">
                <button class="btn btn-run" id="runButton">ì‹¤í–‰</button>
                <button class="btn btn-test" id="testButton">í…ŒìŠ¤íŠ¸</button>
                <button class="btn btn-submit" id="submitButton">ì œì¶œ</button>
            </div>
        </div>
    </div>

    <!-- í”¼ë“œë°± ëª¨ë‹¬ -->
    <div class="modal" id="feedbackModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">ì½”ë“œ í”¼ë“œë°±</div>
                <span class="modal-close" id="closeModal">&times;</span>
            </div>
            <div class="modal-body" id="feedbackContent">
                <!-- ì—¬ê¸°ì— í”¼ë“œë°± ë‚´ìš©ì´ í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-submit" id="confirmModal">í™•ì¸</button>
            </div>
        </div>
    </div>

    <!-- XML ì •ì˜ (Blockly íˆ´ë°•ìŠ¤) -->
    <xml id="toolbox" style="display: none">
        <category name="ì œì–´" colour="#ffc107">
            <block type="controls_if"></block>
            <block type="controls_repeat_ext">
                <value name="TIMES">
                    <shadow type="math_number">
                        <field name="NUM">10</field>
                    </shadow>
                </value>
            </block>
            <block type="controls_for">
                <value name="FROM">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
                <value name="TO">
                    <shadow type="math_number">
                        <field name="NUM">10</field>
                    </shadow>
                </value>
                <value name="BY">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
            </block>
            <block type="controls_forEach"></block>
        </category>
        <category name="ì…ì¶œë ¥" colour="#4285f4">
            <block type="text_print">
                <value name="TEXT">
                    <shadow type="text">
                        <field name="TEXT">abc</field>
                    </shadow>
                </value>
            </block>
            <block type="text_prompt_ext">
                <value name="TEXT">
                    <shadow type="text">
                        <field name="TEXT">ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”</field>
                    </shadow>
                </value>
            </block>
        </category>
        <category name="ë…¼ë¦¬" colour="#34a853">
            <block type="logic_compare"></block>
            <block type="logic_operation"></block>
            <block type="logic_boolean"></block>
        </category>
        <category name="ìˆ˜í•™" colour="#ea4335">
            <block type="math_number">
                <field name="NUM">0</field>
            </block>
            <block type="math_arithmetic">
                <value name="A">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
                <value name="B">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
            </block>
        </category>
        <category name="í…ìŠ¤íŠ¸" colour="#9c27b0">
            <block type="text">
                <field name="TEXT"></field>
            </block>
            <block type="text_join"></block>
            <block type="text_append">
                <value name="TEXT">
                    <shadow type="text">
                        <field name="TEXT"></field>
                    </shadow>
                </value>
            </block>
        </category>
        <category name="ë³€ìˆ˜" colour="#ff5722" custom="VARIABLE"></category>
        <category name="í•¨ìˆ˜" colour="#795548" custom="PROCEDURE"></category>
    </xml>

    <script>
        // í†µí•© ë„¤ë¹„ê²Œì´ì…˜ ì‹œìŠ¤í…œ
        class NavigationManager {
            constructor() {
                this.currentUser = null;
                this.routes = {
                    'dashboard': '/dashboard',
                    'block-coding': '/block-coding', 
                    'algorithm': '/algorithm',
                    'assignments': '/assignments',
                    'progress': '/progress',
                    'teacher-dashboard': '/teacher-dashboard',
                    'create-assignment': '/create-assignment',
                    'review-submissions': '/review-submissions',
                    'student-analytics': '/student-analytics',
                    'student-management': '/student-management',
                    'login': '/login'
                };
                
                this.init();
            }

            init() {
                this.loadUserInfo();
                this.setupEventListeners();
                this.updateNavigationUI();
            }

            loadUserInfo() {
                const token = localStorage.getItem('authToken');
                const userJSON = localStorage.getItem('user');

                if (!token || !userJSON) {
                    this.redirectToLogin();
                    return false;
                }

                try {
                    this.currentUser = JSON.parse(userJSON);
                    return true;
                } catch (error) {
                    console.error('ì‚¬ìš©ì ì •ë³´ íŒŒì‹± ì˜¤ë¥˜:', error);
                    this.clearAuthAndRedirect();
                    return false;
                }
            }

            setupEventListeners() {
                // ë¡œê³  í´ë¦­ ì´ë²¤íŠ¸
                const logoTitle = document.getElementById('logoTitle');
                if (logoTitle) {
                    logoTitle.addEventListener('click', () => {
                        this.navigateToDashboard();
                    });
                }

                // ë„¤ë¹„ê²Œì´ì…˜ ë§í¬ë“¤
                const navLinks = {
                    'dashboardLink': () => this.navigateToDashboard(),
                    'blockCodingLink': () => this.navigateTo('block-coding'),
                    'algorithmLink': () => this.navigateTo('algorithm'),
                    'assignmentsLink': () => {}, // í˜„ì¬ í˜ì´ì§€
                    'progressLink': () => this.navigateTo('progress')
                };

                Object.keys(navLinks).forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.addEventListener('click', (e) => {
                            e.preventDefault();
                            navLinks[id]();
                        });
                    }
                });

                // ì‚¬ìš©ì í”„ë¡œí•„ í´ë¦­ ì´ë²¤íŠ¸
                const userProfile = document.getElementById('userProfile');
                if (userProfile) {
                    userProfile.addEventListener('click', () => {
                        this.handleLogout();
                    });
                }
            }

            updateNavigationUI() {
                if (!this.currentUser) return;

                // ì‚¬ìš©ì ì´ë¦„ ì—…ë°ì´íŠ¸
                const userName = document.getElementById('userName');
                if (userName) {
                    userName.textContent = this.currentUser.name || 'ì‚¬ìš©ì';
                }

                // ì‚¬ìš©ì ì•„ë°”íƒ€ ì—…ë°ì´íŠ¸
                const userAvatar = document.getElementById('userAvatar');
                if (userAvatar) {
                    const initial = (this.currentUser.name || 'U').charAt(0).toUpperCase();
                    userAvatar.textContent = initial;
                }
            }

            navigateToDashboard() {
                if (this.currentUser.role === 'professor' || this.currentUser.role === 'admin') {
                    this.navigateTo('teacher-dashboard');
                } else {
                    this.navigateTo('dashboard');
                }
            }

            navigateTo(routeName) {
                if (this.routes[routeName]) {
                    this.showLoading();
                    
                    setTimeout(() => {
                        window.location.href = this.routes[routeName];
                    }, 300);
                } else {
                    console.error(`Route not found: ${routeName}`);
                }
            }

            redirectToLogin() {
                this.showNotification('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.', 'error');
                setTimeout(() => {
                    window.location.href = this.routes.login;
                }, 1500);
            }

            clearAuthAndRedirect() {
                localStorage.clear();
                this.redirectToLogin();
            }

            handleLogout() {
                if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    this.showLoading();
                    
                    const token = localStorage.getItem('authToken');
                    
                    fetch('/api/logout', {
                        method: 'POST',
                        headers: {
                            'Authorization': 'Bearer ' + token,
                            'Content-Type': 'application/json'
                        }
                    })
                    .then(() => {
                        localStorage.clear();
                        this.showNotification('ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.');
                        setTimeout(() => {
                            window.location.href = this.routes.login;
                        }, 1000);
                    })
                    .catch((error) => {
                        console.error('ë¡œê·¸ì•„ì›ƒ ì˜¤ë¥˜:', error);
                        localStorage.clear();
                        window.location.href = this.routes.login;
                    })
                    .finally(() => {
                        this.hideLoading();
                    });
                }
            }

            showLoading() {
                let loadingOverlay = document.getElementById('loadingOverlay');
                if (loadingOverlay) {
                    loadingOverlay.classList.add('active');
                }
            }

            hideLoading() {
                const loadingOverlay = document.getElementById('loadingOverlay');
                if (loadingOverlay) {
                    loadingOverlay.classList.remove('active');
                }
            }

            showNotification(message, type = 'success') {
                const existingNotification = document.getElementById('navigationNotification');
                if (existingNotification) {
                    existingNotification.remove();
                }

                const notification = document.createElement('div');
                notification.id = 'navigationNotification';
                notification.className = 'navigation-notification';
                notification.textContent = message;

                const backgroundColor = type === 'error' 
                    ? 'linear-gradient(135deg, #f44336, #d32f2f)' 
                    : 'linear-gradient(135deg, #4CAF50, #45a049)';

                notification.style.background = backgroundColor;
                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.style.transform = 'translateX(0)';
                }, 100);

                setTimeout(() => {
                    notification.style.transform = 'translateX(400px)';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 300);
                }, 3000);
            }

            setupKeyboardShortcuts() {
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey || e.metaKey) {
                        switch(e.key) {
                            case '1':
                                e.preventDefault();
                                this.navigateToDashboard();
                                break;
                            case '2':
                                e.preventDefault();
                                this.navigateTo('block-coding');
                                break;
                            case '3':
                                e.preventDefault();
                                this.navigateTo('algorithm');
                                break;
                            case '4':
                                e.preventDefault();
                                // í˜„ì¬ í˜ì´ì§€ì´ë¯€ë¡œ ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŒ
                                break;
                            case '5':
                                e.preventDefault();
                                this.navigateTo('progress');
                                break;
                        }
                    }
                });
            }
        }

        // ë„¤ë¹„ê²Œì´ì…˜ ë§¤ë‹ˆì € ì´ˆê¸°í™”
        let navigationManager;

        // ì „ì—­ ë³€ìˆ˜ ì„ ì–¸
        let workspace;
        let currentTaskId = '1';
        let currentEditorMode = 'block';
        let testResults = [];

        // ê³¼ì œ ë°ì´í„° (ì‹¤ì œë¡œëŠ” ì„œë²„ì—ì„œ ê°€ì ¸ì˜¬ ê²ƒ)
        const tasks = {
            '1': {
                title: 'ë°˜ë³µë¬¸ìœ¼ë¡œ ì‚¬ê°í˜• ê·¸ë¦¬ê¸°',
                meta: 'ë‚œì´ë„: ì´ˆê¸‰ | ë°°ì •: ìœ ìŠ¹í›ˆ êµìˆ˜ | ë§ˆê°: 2025-04-10 23:59',
                description: 'ë°˜ë³µë¬¸ì„ ì‚¬ìš©í•˜ì—¬ N x N í¬ê¸°ì˜ ì‚¬ê°í˜•ì„ ê·¸ë¦¬ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ì„¸ìš”. ì‚¬ìš©ìë¡œë¶€í„° N ê°’ì„ ì…ë ¥ë°›ì•„ \'*\' ë¬¸ìë¡œ ì±„ì›Œì§„ ì‚¬ê°í˜•ì„ ì¶œë ¥í•©ë‹ˆë‹¤. ì´ì¤‘ ë°˜ë³µë¬¸ì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.',
                example: 'ì…ë ¥: 4\nì¶œë ¥:\n****\n****\n****\n****',
                testCases: [
                    { input: '3', expectedOutput: '***\n***\n***' },
                    { input: '5', expectedOutput: '*****\n*****\n*****\n*****\n*****' },
                    { input: '1', expectedOutput: '*' }
                ],
                validationRules: [
                    { type: 'contains_block', blockType: 'controls_repeat_ext', message: 'ë°˜ë³µë¬¸ ë¸”ë¡ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.' },
                    { type: 'min_blocks', count: 5, message: 'ìµœì†Œ 5ê°œ ì´ìƒì˜ ë¸”ë¡ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.' },
                    { type: 'nested_loop', message: 'ì´ì¤‘ ë°˜ë³µë¬¸ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.' }
                ]
            },
            '2': {
                title: 'ì¡°ê±´ë¬¸ìœ¼ë¡œ ì„±ì  ê³„ì‚°í•˜ê¸°',
                meta: 'ë‚œì´ë„: ì´ˆê¸‰ | ë°°ì •: ì´ë¯¸ì§„ êµìˆ˜ | ë§ˆê°: 2025-04-15 23:59',
                description: 'ì ìˆ˜ë¥¼ ì…ë ¥ë°›ì•„ ë“±ê¸‰ì„ ì¶œë ¥í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ì„¸ìš”. 90ì  ì´ìƒì€ A, 80ì  ì´ìƒì€ B, 70ì  ì´ìƒì€ C, 60ì  ì´ìƒì€ D, ê·¸ ë¯¸ë§Œì€ Fì…ë‹ˆë‹¤. ì¡°ê±´ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.',
                example: 'ì…ë ¥: 85\nì¶œë ¥: B',
                testCases: [
                    { input: '95', expectedOutput: 'A' },
                    { input: '80', expectedOutput: 'B' },
                    { input: '75', expectedOutput: 'C' },
                    { input: '60', expectedOutput: 'D' },
                    { input: '45', expectedOutput: 'F' }
                ],
                validationRules: [
                    { type: 'contains_block', blockType: 'controls_if', message: 'ì¡°ê±´ë¬¸ ë¸”ë¡ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.' },
                    { type: 'min_blocks', count: 5, message: 'ìµœì†Œ 5ê°œ ì´ìƒì˜ ë¸”ë¡ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.' }
                ]
            },
            '3': {
                title: 'í•¨ìˆ˜ë¡œ ê³„ì‚°ê¸° ë§Œë“¤ê¸°',
                meta: 'ë‚œì´ë„: ì¤‘ê¸‰ | ë°°ì •: ë°•ì§€ì„± êµìˆ˜ | ë§ˆê°: 2025-04-17 23:59',
                description: 'ë‘ ìˆ˜ì™€ ì—°ì‚°ì(+, -, *, /)ë¥¼ ì…ë ¥ë°›ì•„ ê³„ì‚° ê²°ê³¼ë¥¼ ì¶œë ¥í•˜ëŠ” ê³„ì‚°ê¸° í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ì„¸ìš”. ê° ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ê³  ì´ë¥¼ í˜¸ì¶œí•˜ì—¬ ê²°ê³¼ë¥¼ ì¶œë ¥í•´ì•¼ í•©ë‹ˆë‹¤.',
                example: 'ì…ë ¥: 10 + 5\nì¶œë ¥: 15',
                testCases: [
                    { input: '10 + 5', expectedOutput: '15' },
                    { input: '10 - 5', expectedOutput: '5' },
                    { input: '10 * 5', expectedOutput: '50' },
                    { input: '10 / 5', expectedOutput: '2' }
                ],
                validationRules: [
                    { type: 'contains_block', blockType: 'procedures_defnoreturn', message: 'í•¨ìˆ˜ ë¸”ë¡ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.' },
                    { type: 'min_blocks', count: 10, message: 'ìµœì†Œ 10ê°œ ì´ìƒì˜ ë¸”ë¡ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.' }
                ]
            },
            '4': {
                title: 'ë°°ì—´ë¡œ ë°ì´í„° ë¶„ì„í•˜ê¸°',
                meta: 'ë‚œì´ë„: ì¤‘ê¸‰ | ë°°ì •: ìµœìˆ˜ì˜ êµìˆ˜ | ë§ˆê°: ë¯¸ì •',
                description: 'ìˆ«ì ë°°ì—´ì„ ì…ë ¥ë°›ì•„ ìµœëŒ“ê°’, ìµœì†Ÿê°’, í‰ê· ê°’ì„ ê³„ì‚°í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ì„¸ìš”. ë°°ì—´ê³¼ ë°˜ë³µë¬¸ì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.',
                example: 'ì…ë ¥: [10, 5, 8, 20, 3]\nì¶œë ¥:\nìµœëŒ“ê°’: 20\nìµœì†Ÿê°’: 3\ní‰ê· ê°’: 9.2',
                testCases: [
                    { input: '[10, 5, 8, 20, 3]', expectedOutput: 'ìµœëŒ“ê°’: 20\nìµœì†Ÿê°’: 3\ní‰ê· ê°’: 9.2' },
                    { input: '[1, 2, 3, 4, 5]', expectedOutput: 'ìµœëŒ“ê°’: 5\nìµœì†Ÿê°’: 1\ní‰ê· ê°’: 3' },
                    { input: '[100]', expectedOutput: 'ìµœëŒ“ê°’: 100\nìµœì†Ÿê°’: 100\ní‰ê· ê°’: 100' }
                ],
                validationRules: [
                    { type: 'contains_block', blockType: 'controls_forEach', message: 'ë°˜ë³µë¬¸ ë¸”ë¡ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.' },
                    { type: 'min_blocks', count: 8, message: 'ìµœì†Œ 8ê°œ ì´ìƒì˜ ë¸”ë¡ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.' }
                ]
            }
        };

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function () {
            // ë„¤ë¹„ê²Œì´ì…˜ ë§¤ë‹ˆì € ì´ˆê¸°í™”
            navigationManager = new NavigationManager();
            navigationManager.setupKeyboardShortcuts();

            initBlockly();
            initTaskItems();
            initEditorTabs();
            initLanguageButtons();
            initRunButton();
            initTestButton();
            initSubmitButton();
            initSearchBox();
            initModal();

            // ì²˜ìŒì—ëŠ” ì²« ë²ˆì§¸ ê³¼ì œ í™œì„±í™”
            loadTask('1');
        });

        // Blockly ì´ˆê¸°í™”
        function initBlockly() {
            workspace = Blockly.inject('blocklyDiv', {
                toolbox: document.getElementById('toolbox'),
                grid: {
                    spacing: 20,
                    length: 3,
                    colour: '#ccc',
                    snap: true
                },
                zoom: {
                    controls: true,
                    wheel: true,
                    startScale: 1.0,
                    maxScale: 3,
                    minScale: 0.3,
                    scaleSpeed: 1.2
                },
                trashcan: true
            });

            // ì½”ë“œ ë³€ê²½ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            workspace.addChangeListener(updateCode);
        }

        // ê³¼ì œ í•­ëª© ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™”
        function initTaskItems() {
            const taskItems = document.querySelectorAll('.task-item');

            taskItems.forEach(item => {
                item.addEventListener('click', function () {
                    // ê¸°ì¡´ í™œì„±í™”ëœ í•­ëª© ë¹„í™œì„±í™”
                    const activeItem = document.querySelector('.task-item.active');
                    if (activeItem) {
                        activeItem.classList.remove('active');
                    }

                    // ì„ íƒí•œ í•­ëª© í™œì„±í™”
                    this.classList.add('active');

                    // ê³¼ì œ ë¡œë“œ
                    const taskId = this.getAttribute('data-task-id');
                    loadTask(taskId);
                });
            });
        }

        // ì—ë””í„° íƒ­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™”
        function initEditorTabs() {
            const editorTabs = document.querySelectorAll('.editor-tab');

            editorTabs.forEach(tab => {
                tab.addEventListener('click', function () {
                    // ê¸°ì¡´ í™œì„±í™”ëœ íƒ­ ë¹„í™œì„±í™”
                    const activeTab = document.querySelector('.editor-tab.active');
                    if (activeTab) {
                        activeTab.classList.remove('active');
                    }

                    // ì„ íƒí•œ íƒ­ í™œì„±í™”
                    this.classList.add('active');

                    // ì—ë””í„° ëª¨ë“œ ì „í™˜
                    const mode = this.getAttribute('data-editor');
                    switchEditorMode(mode);
                });
            });
        }

        // ì–¸ì–´ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™”
        function initLanguageButtons() {
            const languageButtons = document.querySelectorAll('.language-button');

            languageButtons.forEach(button => {
                button.addEventListener('click', function () {
                    // ê¸°ì¡´ í™œì„±í™”ëœ ë²„íŠ¼ ë¹„í™œì„±í™”
                    const activeButton = document.querySelector('.language-button.active-language');
                    if (activeButton) {
                        activeButton.classList.remove('active-language');
                        activeButton.classList.add('inactive-language');
                    }

                    // ì„ íƒí•œ ë²„íŠ¼ í™œì„±í™”
                    this.classList.remove('inactive-language');
                    this.classList.add('active-language');

                    // ì½”ë“œ ì—…ë°ì´íŠ¸
                    updateCode();
                });
            });
        }

        // ì‹¤í–‰ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™”
        function initRunButton() {
            const runButton = document.getElementById('runButton');

            runButton.addEventListener('click', function () {
                runCode();
                
                // ë„¤ë¹„ê²Œì´ì…˜ ë§¤ë‹ˆì €ì˜ ì•Œë¦¼ ì‹œìŠ¤í…œ ì‚¬ìš©
                if (navigationManager) {
                    navigationManager.showNotification('ì½”ë“œê°€ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤!');
                }
            });
        }

        // í…ŒìŠ¤íŠ¸ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™”
        function initTestButton() {
            const testButton = document.getElementById('testButton');

            testButton.addEventListener('click', function () {
                runTests();
                
                if (navigationManager) {
                    navigationManager.showNotification('í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤!');
                }
            });
        }

        // ì œì¶œ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™”
        function initSubmitButton() {
            const submitButton = document.getElementById('submitButton');

            submitButton.addEventListener('click', function () {
                submitTask();
            });
        }

        // ê²€ìƒ‰ ìƒì ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™”
        function initSearchBox() {
            const searchBox = document.getElementById('searchBox');

            searchBox.addEventListener('input', function () {
                searchTasks(this.value);
            });
        }

        // ëª¨ë‹¬ ì´ˆê¸°í™”
        function initModal() {
            const modal = document.getElementById('feedbackModal');
            const closeModal = document.getElementById('closeModal');
            const confirmModal = document.getElementById('confirmModal');
            const feedbackButton = document.getElementById('feedbackButton');

            feedbackButton.addEventListener('click', function () {
                modal.style.display = 'block';
            });

            closeModal.addEventListener('click', function () {
                modal.style.display = 'none';
            });

            confirmModal.addEventListener('click', function () {
                modal.style.display = 'none';
            });

            window.addEventListener('click', function (event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        }

        // ì—ë””í„° ëª¨ë“œ ì „í™˜
        function switchEditorMode(mode) {
            const blocklyDiv = document.getElementById('blocklyDiv');
            const codeView = document.getElementById('codeView');

            if (mode === 'block') {
                blocklyDiv.style.display = 'block';
                codeView.style.display = 'none';
                currentEditorMode = 'block';
            } else if (mode === 'code') {
                blocklyDiv.style.display = 'none';
                codeView.style.display = 'block';
                currentEditorMode = 'code';

                // ì½”ë“œ ë·° ì—…ë°ì´íŠ¸
                const code = getGeneratedCode();
                codeView.textContent = code;
            }
        }

        // ê³¼ì œ ë¡œë“œ
        function loadTask(taskId) {
            currentTaskId = taskId;

            // ê³¼ì œ ì •ë³´ ì—…ë°ì´íŠ¸
            const task = tasks[taskId];
            document.getElementById('currentTaskTitle').textContent = task.title;
            document.getElementById('currentTaskMeta').textContent = task.meta;
            document.getElementById('taskDescription').textContent = task.description;
            document.getElementById('taskExample').textContent = task.example;

            // ê²°ê³¼ íŒ¨ë„ ì´ˆê¸°í™”
            document.getElementById('outputContent').textContent = '';
            document.getElementById('testCasePanel').style.display = 'none';
            document.getElementById('scoreDisplay').style.display = 'none';
            document.getElementById('feedbackButton').style.display = 'none';

            // ê³¼ì œì— ë§ëŠ” ê¸°ë³¸ ë¸”ë¡ ë¡œë“œ
            loadTaskBlocks(taskId);
        }

        // ê³¼ì œë³„ ê¸°ë³¸ ë¸”ë¡ ë¡œë“œ
        function loadTaskBlocks(taskId) {
            // ê¸°ì¡´ ë¸”ë¡ ëª¨ë‘ ì œê±°
            workspace.clear();

            // ê³¼ì œë³„ë¡œ í•„ìš”í•œ ì´ˆê¸° ë¸”ë¡ ì¶”ê°€
            let xml;

            if (taskId === '1') {
                // ì‚¬ê°í˜• ê·¸ë¦¬ê¸° ê³¼ì œìš© ì´ˆê¸° ë¸”ë¡
                xml = `
          <xml xmlns="https://developers.google.com/blockly/xml">
            <block type="text_prompt_ext" x="50" y="50">
              <value name="TEXT">
                <shadow type="text">
                  <field name="TEXT">Nì„ ì…ë ¥í•˜ì„¸ìš”:</field>
                </shadow>
              </value>
            </block>
          </xml>
        `;
            } else if (taskId === '2') {
                // ì„±ì  ê³„ì‚° ê³¼ì œìš© ì´ˆê¸° ë¸”ë¡
                xml = `
          <xml xmlns="https://developers.google.com/blockly/xml">
            <block type="text_prompt_ext" x="50" y="50">
              <value name="TEXT">
                <shadow type="text">
                  <field name="TEXT">ì ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”:</field>
                </shadow>
              </value>
            </block>
          </xml>
        `;
            } else if (taskId === '3') {
                // ê³„ì‚°ê¸° ê³¼ì œìš© ì´ˆê¸° ë¸”ë¡
                xml = `
          <xml xmlns="https://developers.google.com/blockly/xml">
            <block type="procedures_defnoreturn" x="50" y="50">
              <field name="NAME">ê³„ì‚°í•˜ê¸°</field>
            </block>
          </xml>
        `;
            } else if (taskId === '4') {
                // ë°ì´í„° ë¶„ì„ ê³¼ì œìš© ì´ˆê¸° ë¸”ë¡
                xml = `
          <xml xmlns="https://developers.google.com/blockly/xml">
            <block type="variables_set" x="50" y="50">
              <field name="VAR" id="listsId">ë¦¬ìŠ¤íŠ¸</field>
              <value name="VALUE">
                <block type="text_prompt_ext">
                  <value name="TEXT">
                    <shadow type="text">
                      <field name="TEXT">ìˆ«ì ë°°ì—´ì„ ì…ë ¥í•˜ì„¸ìš”:</field>
                    </shadow>
                  </value>
                </block>
              </value>
            </block>
          </xml>
        `;
            }

            if (xml) {
                const dom = Blockly.Xml.textToDom(xml);
                Blockly.Xml.domToWorkspace(dom, workspace);
            }

            // ì½”ë“œ ì—…ë°ì´íŠ¸
            updateCode();
        }

        // í˜„ì¬ ì„ íƒëœ ì–¸ì–´ì— ë”°ë¼ ì½”ë“œ ìƒì„±
        function getGeneratedCode() {
            const pythonButton = document.getElementById('pythonButton');
            let code = '';

            if (pythonButton.classList.contains('active-language')) {
                // Python ì½”ë“œ ìƒì„±
                try {
                    code = Blockly.Python.workspaceToCode(workspace);
                } catch (e) {
                    code = '# ì½”ë“œ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\n# ' + e.message;
                }
            } else {
                // JavaScript ì½”ë“œ ìƒì„±
                try {
                    code = Blockly.JavaScript.workspaceToCode(workspace);
                } catch (e) {
                    code = '// ì½”ë“œ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\n// ' + e.message;
                }
            }

            return code;
        }

        // ì½”ë“œ ì—…ë°ì´íŠ¸
        function updateCode() {
            const code = getGeneratedCode();
            document.getElementById('codeContent').textContent = code;

            // ì½”ë“œ ë·° ëª¨ë“œì¸ ê²½ìš° ì½”ë“œ ë·°ë„ ì—…ë°ì´íŠ¸
            if (currentEditorMode === 'code') {
                document.getElementById('codeView').textContent = code;
            }
        }

        // ì½”ë“œ ì‹¤í–‰
        function runCode() {
            const outputContent = document.getElementById('outputContent');
            let code;

            // ì¶œë ¥ ì˜ì—­ ì´ˆê¸°í™”
            outputContent.textContent = '';

            // ì ìˆ˜ ë° í”¼ë“œë°± ìˆ¨ê¸°ê¸°
            document.getElementById('scoreDisplay').style.display = 'none';
            document.getElementById('feedbackButton').style.display = 'none';
            document.getElementById('testCasePanel').style.display = 'none';

            // ì‹¤í–‰ ì‹œë„
            try {
                // í˜„ì¬ ì„ íƒëœ ì–¸ì–´ í™•ì¸
                const isPython = document.getElementById('pythonButton').classList.contains('active-language');
                
                if (isPython) {
                    // Python ì½”ë“œ í‘œì‹œ
                    const pythonCode = Blockly.Python.workspaceToCode(workspace);
                    outputContent.textContent += 'â€» Python ì½”ë“œëŠ” ì§ì ‘ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤:\n\n' + pythonCode + '\n\n';
                    outputContent.textContent += 'â€» ì‹¤í–‰ ê²°ê³¼ëŠ” JavaScriptë¡œ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤:\n\n';
                    
                    // JavaScript ì½”ë“œë¡œ ì‹¤í–‰
                    code = Blockly.JavaScript.workspaceToCode(workspace);
                } else {
                    // JavaScript ì½”ë“œ
                    code = Blockly.JavaScript.workspaceToCode(workspace);
                }

                // ì½˜ì†” ì¶œë ¥ì„ ìº¡ì²˜í•˜ê¸° ìœ„í•´ console.log ì„ì‹œ ì¬ì •ì˜
                const originalConsoleLog = console.log;
                console.log = function () {
                    const args = Array.from(arguments);
                    outputContent.textContent += args.join(' ') + '\n';
                    originalConsoleLog.apply(console, arguments);
                };

                // ì‚¬ìš©ì ì…ë ¥ì„ ì‹œë®¬ë ˆì´ì…˜í•˜ê¸° ìœ„í•œ prompt ì¬ì •ì˜
                const originalPrompt = window.prompt;
                window.prompt = function (text) {
                    const result = originalPrompt(text);
                    outputContent.textContent += `ì…ë ¥: ${result}\n`;
                    return result;
                };

                // JavaScript ì½”ë“œ ì‹¤í–‰
                new Function(code)();

                // ì›ë˜ í•¨ìˆ˜ ë³µì›
                console.log = originalConsoleLog;
                window.prompt = originalPrompt;
            } catch (e) {
                // ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ìš°
                outputContent.textContent += 'ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ' + e.message;
                console.error('Code execution error:', e);
            }
        }

        // í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‹¤í–‰
        function runTests() {
            const task = tasks[currentTaskId];
            const testCases = task.testCases;
            const outputContent = document.getElementById('outputContent');
            const testCaseContent = document.getElementById('testCaseContent');
            
            // ì–¸ì–´ì— ê´€ê³„ì—†ì´ í•­ìƒ JavaScript ì½”ë“œë¥¼ ì–»ì–´ì„œ ì‹¤í–‰
            const code = Blockly.JavaScript.workspaceToCode(workspace);

            // ì¶œë ¥ ì˜ì—­ ì´ˆê¸°í™”
            outputContent.textContent = '';
            testCaseContent.innerHTML = '';

            // Python ëª¨ë“œì¸ ê²½ìš° Python ì½”ë“œë„ í‘œì‹œ
            const isPython = document.getElementById('pythonButton').classList.contains('active-language');
            if (isPython) {
                const pythonCode = Blockly.Python.workspaceToCode(workspace);
                outputContent.textContent += 'â€» Python ì½”ë“œ:\n\n' + pythonCode + '\n\n';
                outputContent.textContent += 'â€» í…ŒìŠ¤íŠ¸ ê²°ê³¼ (JavaScriptë¡œ ì‹¤í–‰):\n\n';
            }

            // í…ŒìŠ¤íŠ¸ íŒ¨ë„ í‘œì‹œ
            document.getElementById('testCasePanel').style.display = 'block';

            // í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì €ì¥ ë°°ì—´ ì´ˆê¸°í™”
            testResults = [];

            // ê° í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‹¤í–‰
            let passedCount = 0;

            for (let i = 0; i < testCases.length; i++) {
                const testCase = testCases[i];

                try {
                    // í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ í•­ëª© ìƒì„±
                    const testItem = document.createElement('div');
                    testItem.className = 'test-case-item';

                    // ì½˜ì†” ì¶œë ¥ ìº¡ì²˜
                    const originalConsoleLog = console.log;
                    let outputLines = [];
                    console.log = function () {
                        const args = Array.from(arguments);
                        outputLines.push(args.join(' '));
                        originalConsoleLog.apply(console, arguments);
                    };

                    // í”„ë¡¬í”„íŠ¸ ëŒ€ì²´ (í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì˜ ì…ë ¥ ì‚¬ìš©)
                    const originalPrompt = window.prompt;
                    window.prompt = function () {
                        return testCase.input;
                    };

                    // ì½”ë“œ ì‹¤í–‰
                    new Function(code)();

                    // ì›ë˜ í•¨ìˆ˜ ë³µì›
                    console.log = originalConsoleLog;
                    window.prompt = originalPrompt;

                    // ì¶œë ¥ ë¹„êµ
                    const output = outputLines.join('\n');
                    const expected = testCase.expectedOutput;
                    const isPassed = compareOutputs(output, expected);

                    // ê²°ê³¼ ì €ì¥
                    testResults.push({
                        input: testCase.input,
                        output: output,
                        expected: expected,
                        passed: isPassed
                    });

                    // í†µê³¼ ì—¬ë¶€ì— ë”°ë¼ UI ì—…ë°ì´íŠ¸
                    const badgeDiv = document.createElement('div');
                    badgeDiv.className = 'test-case-badge ' + (isPassed ? 'badge-success' : 'badge-error');

                    const textDiv = document.createElement('div');
                    textDiv.textContent = `í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ${i + 1}: ${testCase.input} => ${isPassed ? 'í†µê³¼' : 'ì‹¤íŒ¨'}`;

                    testItem.appendChild(badgeDiv);
                    testItem.appendChild(textDiv);
                    testCaseContent.appendChild(testItem);

                    if (isPassed) {
                        passedCount++;
                    }
                } catch (e) {
                    // ì˜¤ë¥˜ ë°œìƒ ì‹œ
                    const testItem = document.createElement('div');
                    testItem.className = 'test-case-item';

                    const badgeDiv = document.createElement('div');
                    badgeDiv.className = 'test-case-badge badge-error';

                    const textDiv = document.createElement('div');
                    textDiv.textContent = `í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ${i + 1}: ì˜¤ë¥˜ ë°œìƒ - ${e.message}`;

                    testItem.appendChild(badgeDiv);
                    testItem.appendChild(textDiv);
                    testCaseContent.appendChild(testItem);

                    // ê²°ê³¼ ì €ì¥
                    testResults.push({
                        input: testCase.input,
                        output: 'ì˜¤ë¥˜: ' + e.message,
                        expected: testCase.expectedOutput,
                        passed: false
                    });
                }
            }

            // ì ìˆ˜ ê³„ì‚° ë° í‘œì‹œ
            const score = Math.round((passedCount / testCases.length) * 100);
            const scoreDisplay = document.getElementById('scoreDisplay');
            scoreDisplay.textContent = `ì ìˆ˜: ${score}/100`;
            scoreDisplay.style.display = 'inline-block';

            // í”¼ë“œë°± ë²„íŠ¼ í‘œì‹œ
            document.getElementById('feedbackButton').style.display = 'inline-block';

            // í”¼ë“œë°± ë‚´ìš© ìƒì„±
            generateFeedback(score);

            // ê²°ê³¼ ìš”ì•½ í‘œì‹œ
            outputContent.textContent += `í…ŒìŠ¤íŠ¸ ê²°ê³¼: ${passedCount}/${testCases.length} í†µê³¼ (${score}ì )\n\n`;
            outputContent.textContent += 'â€» ìì„¸í•œ ê²°ê³¼ëŠ” í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ íŒ¨ë„ì„ í™•ì¸í•˜ì„¸ìš”.';
        }

        // ì¶œë ¥ ê²°ê³¼ ë¹„êµ
        function compareOutputs(actual, expected) {
            // ê³µë°± ë° ì¤„ë°”ê¿ˆ ì •ê·œí™”
            const normalizeString = (str) => str.trim().replace(/\s+/g, ' ');

            // ìˆ«ì í˜•ì‹ ì°¨ì´ í—ˆìš© (ì˜ˆ: 9.2ì™€ 9.20)
            const actualNormalized = normalizeString(actual);
            const expectedNormalized = normalizeString(expected);

            // ì§ì ‘ ë¹„êµ
            if (actualNormalized === expectedNormalized) {
                return true;
            }

            // ìˆ«ìë§Œ ì¶”ì¶œí•˜ì—¬ ë¹„êµ (í˜•ì‹ ì°¨ì´ í—ˆìš©)
            const extractNumbers = (str) => {
                const matches = str.match(/[-+]?\d*\.?\d+/g);
                return matches ? matches.map(Number) : [];
            };

            const actualNumbers = extractNumbers(actual);
            const expectedNumbers = extractNumbers(expected);

            if (actualNumbers.length !== expectedNumbers.length) {
                return false;
            }

            // ìˆ«ì ë¹„êµ (ì†Œìˆ˜ì  ì°¨ì´ í—ˆìš©)
            for (let i = 0; i < actualNumbers.length; i++) {
                if (Math.abs(actualNumbers[i] - expectedNumbers[i]) > 0.001) {
                    return false;
                }
            }

            return true;
        }

        // í”¼ë“œë°± ìƒì„±
        function generateFeedback(score) {
            const task = tasks[currentTaskId];
            const feedbackContent = document.getElementById('feedbackContent');

            let feedback = '';

            // ì ìˆ˜ì— ë”°ë¥¸ ê¸°ë³¸ í”¼ë“œë°±
            if (score >= 90) {
                feedback += '<p><strong>ğŸ‰ í›Œë¥­í•©ë‹ˆë‹¤!</strong> ëª¨ë“  í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì„±ê³µì ìœ¼ë¡œ í†µê³¼í–ˆìŠµë‹ˆë‹¤.</p>';
            } else if (score >= 70) {
                feedback += '<p><strong>ğŸ‘ ì¢‹ì€ ì‹œë„ì…ë‹ˆë‹¤!</strong> ëŒ€ë¶€ë¶„ì˜ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í–ˆìŠµë‹ˆë‹¤.</p>';
            } else if (score >= 40) {
                feedback += '<p><strong>ğŸ” ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.</strong> ì¼ë¶€ í…ŒìŠ¤íŠ¸ë§Œ í†µê³¼í–ˆìŠµë‹ˆë‹¤.</p>';
            } else {
                feedback += '<p><strong>â— ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.</strong> ëŒ€ë¶€ë¶„ì˜ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</p>';
            }

            // ì½”ë“œ ê²€ì¦ ê·œì¹™ í™•ì¸
            const validationResults = validateCode(task.validationRules);

            if (validationResults.length > 0) {
                feedback += '<p><strong>ğŸ“‹ ì½”ë“œ êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸:</strong></p>';
                feedback += '<ul>';

                for (const result of validationResults) {
                    const icon = result.passed ? 'âœ…' : 'âŒ';
                    feedback += `<li>${icon} ${result.message}</li>`;
                }

                feedback += '</ul>';
            }

            // í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì„¸ë¶€ ê²°ê³¼
            if (testResults.length > 0) {
                feedback += '<p><strong>ğŸ“Š í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ê²°ê³¼:</strong></p>';
                feedback += '<ul>';

                for (let i = 0; i < testResults.length; i++) {
                    const result = testResults[i];
                    const icon = result.passed ? 'âœ…' : 'âŒ';

                    feedback += `<li>${icon} í…ŒìŠ¤íŠ¸ ${i + 1} (ì…ë ¥: ${result.input}):</li>`;

                    if (!result.passed) {
                        feedback += `<ul>`;
                        feedback += `<li>ê¸°ëŒ€ ì¶œë ¥: ${result.expected}</li>`;
                        feedback += `<li>ì‹¤ì œ ì¶œë ¥: ${result.output}</li>`;
                        feedback += `</ul>`;
                    }
                }

                feedback += '</ul>';
            }

            feedbackContent.innerHTML = feedback;
        }

        // ì½”ë“œ ê²€ì¦ (ê³¼ì œì˜ ìš”êµ¬ì‚¬í•­ ì¶©ì¡± ì—¬ë¶€ í™•ì¸)
        function validateCode(validationRules) {
            const results = [];

            for (const rule of validationRules) {
                let passed = false;

                switch (rule.type) {
                    case 'contains_block':
                        // íŠ¹ì • ë¸”ë¡ íƒ€ì…ì´ ì‚¬ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸
                        passed = workspace.getAllBlocks().some(block => block.type === rule.blockType);
                        break;

                    case 'min_blocks':
                        // ìµœì†Œ ë¸”ë¡ ê°œìˆ˜ í™•ì¸
                        passed = workspace.getAllBlocks().length >= rule.count;
                        break;

                    case 'nested_loop':
                        // ì¤‘ì²© ë°˜ë³µë¬¸ í™•ì¸
                        passed = checkNestedLoop();
                        break;
                }

                results.push({
                    type: rule.type,
                    message: rule.message,
                    passed: passed
                });
            }

            return results;
        }

        // ì¤‘ì²© ë°˜ë³µë¬¸ í™•ì¸ í•¨ìˆ˜
        function checkNestedLoop() {
            const blocks = workspace.getAllBlocks();

            // ëª¨ë“  ë°˜ë³µë¬¸ ë¸”ë¡ ì°¾ê¸°
            const loopBlocks = blocks.filter(block =>
                block.type === 'controls_repeat_ext' ||
                block.type === 'controls_forEach' ||
                block.type === 'controls_for' ||
                block.type === 'controls_whileUntil'
            );

            // ì¤‘ì²© ë°˜ë³µë¬¸ í™•ì¸
            for (const outerLoop of loopBlocks) {
                // ë°˜ë³µë¬¸ ë‚´ë¶€ì˜ ëª¨ë“  ë¸”ë¡ ì°¾ê¸°
                const innerBlocks = outerLoop.getDescendants();

                // ë‚´ë¶€ ë¸”ë¡ ì¤‘ì— ë‹¤ë¥¸ ë°˜ë³µë¬¸ì´ ìˆëŠ”ì§€ í™•ì¸
                const hasNestedLoop = innerBlocks.some(block =>
                    block !== outerLoop && (
                        block.type === 'controls_repeat_ext' ||
                        block.type === 'controls_forEach' ||
                        block.type === 'controls_for' ||
                        block.type === 'controls_whileUntil'
                    )
                );

                if (hasNestedLoop) {
                    return true;
                }
            }

            return false;
        }

        // ê³¼ì œ ì œì¶œ
        function submitTask() {
            // ë¨¼ì € í…ŒìŠ¤íŠ¸ ì‹¤í–‰
            runTests();

            // í…ŒìŠ¤íŠ¸ ê²°ê³¼ì™€ ê²€ì¦ ê²°ê³¼ë¡œ ìµœì¢… ì ìˆ˜ ê³„ì‚°
            const task = tasks[currentTaskId];
            const validationResults = validateCode(task.validationRules);

            // í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì ìˆ˜ (70%)
            let testScore = 0;
            if (testResults.length > 0) {
                const passedCount = testResults.filter(result => result.passed).length;
                testScore = Math.round((passedCount / testResults.length) * 70);
            }

            // ì½”ë“œ ê²€ì¦ ì ìˆ˜ (30%)
            const passedValidations = validationResults.filter(result => result.passed).length;
            const validationScore = Math.round((passedValidations / validationResults.length) * 30);

            // ìµœì¢… ì ìˆ˜
            const finalScore = testScore + validationScore;

            // ê²°ê³¼ í‘œì‹œ
            showSubmitResult(finalScore, validationResults);
            
            // ë„¤ë¹„ê²Œì´ì…˜ ë§¤ë‹ˆì €ì˜ ì•Œë¦¼ ì‹œìŠ¤í…œ ì‚¬ìš©
            if (navigationManager) {
                if (finalScore >= 80) {
                    navigationManager.showNotification(`ê³¼ì œê°€ ì„±ê³µì ìœ¼ë¡œ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤! (${finalScore}ì )`);
                } else {
                    navigationManager.showNotification(`ê³¼ì œê°€ ì œì¶œë˜ì—ˆì§€ë§Œ ì ìˆ˜ê°€ ë‚®ìŠµë‹ˆë‹¤. (${finalScore}ì )`, 'error');
                }
            }
        }

        // ì œì¶œ ê²°ê³¼ í‘œì‹œ
        function showSubmitResult(score, validationResults) {
            const outputContent = document.getElementById('outputContent');

            // ê²°ê³¼ ìš”ì•½ ìƒì„±
            const resultSummary = document.createElement('div');
            resultSummary.className = 'result-summary';

            const scoreDisplay = document.createElement('div');
            scoreDisplay.className = 'result-score';

            if (score >= 80) {
                scoreDisplay.textContent = `ì¶•í•˜í•©ë‹ˆë‹¤! ìµœì¢… ì ìˆ˜: ${score}ì `;
                scoreDisplay.classList.add('result-pass');
            } else {
                scoreDisplay.textContent = `ìµœì¢… ì ìˆ˜: ${score}ì `;
                scoreDisplay.classList.add('result-fail');
            }

            resultSummary.appendChild(scoreDisplay);

            const message = document.createElement('p');
            if (score >= 80) {
                message.textContent = 'ê³¼ì œê°€ ì„±ê³µì ìœ¼ë¡œ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤!';
            } else {
                message.textContent = 'ì ìˆ˜ê°€ 80ì  ë¯¸ë§Œì…ë‹ˆë‹¤. ì½”ë“œë¥¼ ê°œì„ í•˜ê³  ë‹¤ì‹œ ì œì¶œí•´ë³´ì„¸ìš”.';
            }
            resultSummary.appendChild(message);

            // ê¸°ì¡´ ë‚´ìš© ìœ„ì— ê²°ê³¼ ìš”ì•½ ì¶”ê°€
            outputContent.insertBefore(resultSummary, outputContent.firstChild);

            // í”¼ë“œë°± ë²„íŠ¼ í‘œì‹œ
            document.getElementById('feedbackButton').style.display = 'inline-block';
            document.getElementById('scoreDisplay').textContent = `ì ìˆ˜: ${score}/100`;
            document.getElementById('scoreDisplay').style.display = 'inline-block';
        }

        // ê³¼ì œ ê²€ìƒ‰
        function searchTasks(keyword) {
            const taskItems = document.querySelectorAll('.task-item');

            if (!keyword) {
                // ê²€ìƒ‰ì–´ê°€ ì—†ìœ¼ë©´ ëª¨ë“  ê³¼ì œ í‘œì‹œ
                taskItems.forEach(item => {
                    item.style.display = 'block';
                });
                return;
            }

            keyword = keyword.toLowerCase();

            // ê²€ìƒ‰ì–´ë¡œ ê³¼ì œ í•„í„°ë§
            taskItems.forEach(item => {
                const title = item.querySelector('.task-title').textContent.toLowerCase();
                const meta = item.querySelector('.task-meta').textContent.toLowerCase();

                if (title.includes(keyword) || meta.includes(keyword)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // ì¹´í…Œê³ ë¦¬ íƒ­ ì „í™˜
        document.querySelectorAll('.category-tab').forEach(tab => {
            tab.addEventListener('click', function () {
                // ê¸°ì¡´ í™œì„±í™”ëœ íƒ­ ë¹„í™œì„±í™”
                document.querySelector('.category-tab.active').classList.remove('active');

                // ì„ íƒí•œ íƒ­ í™œì„±í™”
                this.classList.add('active');

                // ì¹´í…Œê³ ë¦¬ì— ë”°ë¼ ê³¼ì œ í•„í„°ë§
                const category = this.getAttribute('data-category');
                filterTasksByCategory(category);
            });
        });

        // ì¹´í…Œê³ ë¦¬ë³„ ê³¼ì œ í•„í„°ë§
        function filterTasksByCategory(category) {
            const taskItems = document.querySelectorAll('.task-item');

            if (category === 'all') {
                // 'ì „ì²´' ì¹´í…Œê³ ë¦¬: ëª¨ë“  ê³¼ì œ í‘œì‹œ
                taskItems.forEach(item => {
                    item.style.display = 'block';
                });
            } else if (category === 'incomplete') {
                // 'ë¯¸ì™„ë£Œ' ì¹´í…Œê³ ë¦¬: ë¯¸ì™„ë£Œ ê³¼ì œë§Œ í‘œì‹œ (ì—¬ê¸°ì„œëŠ” ì˜ˆì‹œë¡œ 1, 2ë²ˆë§Œ ë¯¸ì™„ë£Œë¡œ ê°€ì •)
                taskItems.forEach(item => {
                    const taskId = item.getAttribute('data-task-id');
                    if (taskId === '1' || taskId === '2') {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });
            }
        }

        // Blockly ì›¹í˜ì´ì§€ í¬ê¸° ì¡°ì • ì‹œ ìë™ ë¦¬ì‚¬ì´ì§•
        window.addEventListener('resize', function () {
            Blockly.svgResize(workspace);
        });

        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 'r':
                        e.preventDefault();
                        runCode();
                        break;
                    case 't':
                        e.preventDefault();
                        runTests();
                        break;
                    case 's':
                        e.preventDefault();
                        submitTask();
                        break;
                }
            }
        });

        // í˜ì´ì§€ ì´íƒˆ ì‹œ í™•ì¸
        window.addEventListener('beforeunload', function (e) {
            if (workspace.getAllBlocks(false).length > 0) {
                e.preventDefault();
                e.returnValue = '';
            }
        });
    </script>
</body>
</html>